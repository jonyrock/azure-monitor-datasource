{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./css/query_editor.css","webpack:///../node_modules/css-loader/lib/css-base.js","webpack:///../node_modules/style-loader/lib/addStyles.js","webpack:///../node_modules/style-loader/lib/urls.js","webpack:///./app_insights/app_insights_datasource.ts","webpack:///./app_insights/app_insights_querystring_builder.ts","webpack:///./app_insights/app_insights_rawquerystring_builder.ts","webpack:///./app_insights/response_parser.ts","webpack:///./azure_monitor/azure_monitor_datasource.ts","webpack:///./azure_monitor/azure_monitor_filter_builder.ts","webpack:///./azure_monitor/response_parser.ts","webpack:///./azure_monitor/supported_namespaces.ts","webpack:///./azure_monitor/url_builder.ts","webpack:///./config_ctrl.ts","webpack:///./css/query_editor.css?2dcc","webpack:///./datasource.ts","webpack:///./module.ts","webpack:///./query_ctrl.ts","webpack:///./time_grain_converter.ts","webpack:///external \"app/core/utils/kbn\"","webpack:///external \"app/plugins/sdk\"","webpack:///external \"lodash\"","webpack:///external \"moment\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;ACnEA;AACA;;;AAGA;AACA,wCAAyC,qBAAqB,GAAG,mBAAmB,qBAAqB,GAAG,mBAAmB,qBAAqB,GAAG,kDAAkD,oBAAoB,GAAG,yEAAyE,sBAAsB,uBAAuB,iBAAiB,GAAG,mCAAmC,uBAAuB,GAAG,qCAAqC,gBAAgB,GAAG,UAAU,gLAAgL,YAAY,OAAO,KAAK,YAAY,OAAO,KAAK,YAAY,OAAO,KAAK,YAAY,OAAO,KAAK,UAAU,OAAO,KAAK,UAAU,MAAM,KAAK,YAAY,OAAO,KAAK,UAAU,kEAAkE,qBAAqB,GAAG,mBAAmB,qBAAqB,GAAG,mBAAmB,qBAAqB,GAAG,kDAAkD,oBAAoB,GAAG,yEAAyE,sBAAsB,uBAAuB,iBAAiB,GAAG,mCAAmC,uBAAuB,GAAG,qCAAqC,gBAAgB,GAAG,qBAAqB;;AAEn1C;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC1XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;;;;;;;;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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./module.ts\");\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".min-width-10 {\\n  min-width: 10rem;\\n}\\n\\n.min-width-12 {\\n  min-width: 12rem;\\n}\\n\\n.min-width-20 {\\n  min-width: 20rem;\\n}\\n\\n.gf-form-select-wrapper select.gf-form-input {\\n  height: 2.64rem;\\n}\\n\\n.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after {\\n  right: 0.775rem\\n}\\n\\n.service-dropdown {\\n  width: 12rem;\\n}\\n\\n.aggregation-dropdown-wrapper {\\n  max-width: 29.1rem;\\n}\\n\\n.timegrainunit-dropdown-wrapper {\\n  width: 8rem;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/home/daniel/dev/go/src/github.com/grafana/grafana/data/plugins/grafana-azure-monitor-datasource/src/css/query_editor.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,iBAAiB;CAClB;;AAED;EACE,iBAAiB;CAClB;;AAED;EACE,iBAAiB;CAClB;;AAED;EACE,gBAAgB;CACjB;;AAED;EACE,eAAe;CAChB;;AAED;EACE,aAAa;CACd;;AAED;EACE,mBAAmB;CACpB;;AAED;EACE,YAAY;CACb\",\"file\":\"query_editor.css\",\"sourcesContent\":[\".min-width-10 {\\n  min-width: 10rem;\\n}\\n\\n.min-width-12 {\\n  min-width: 12rem;\\n}\\n\\n.min-width-20 {\\n  min-width: 20rem;\\n}\\n\\n.gf-form-select-wrapper select.gf-form-input {\\n  height: 2.64rem;\\n}\\n\\n.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after {\\n  right: 0.775rem\\n}\\n\\n.service-dropdown {\\n  width: 12rem;\\n}\\n\\n.aggregation-dropdown-wrapper {\\n  max-width: 29.1rem;\\n}\\n\\n.timegrainunit-dropdown-wrapper {\\n  width: 8rem;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","///<reference path=\"../../node_modules/grafana-sdk-mocks/app/headers/common.d.ts\" />\n\nimport _ from 'lodash';\nimport AppInsightsQuerystringBuilder from './app_insights_querystring_builder';\nimport AppInsightsRawQuerystringBuilder from './app_insights_rawquerystring_builder';\nimport ResponseParser from './response_parser';\n\nexport default class AppInsightsDatasource {\n  id: number;\n  url: string;\n  baseUrl: string;\n  version = 'beta';\n  applicationId: string;\n\n  constructor(instanceSettings, private backendSrv, private templateSrv, private $q) {\n    this.id = instanceSettings.id;\n    this.applicationId = instanceSettings.jsonData.appInsightsAppId;\n    this.baseUrl = `/appinsights/${this.version}/apps/${this.applicationId}`;\n    this.url = instanceSettings.url;\n  }\n\n  isConfigured() {\n    return this.applicationId && this.applicationId.length > 0;\n  }\n\n  query(options) {\n    const queries = _.filter(options.targets, item => {\n      return item.hide !== true;\n    }).map(target => {\n      const item = target.appInsights;\n      if (item.rawQuery) {\n        const querystringBuilder = new AppInsightsRawQuerystringBuilder(item.rawQueryString, options);\n        const url = `${this.baseUrl}/query?${querystringBuilder.generate()}`;\n\n        return {\n          refId: target.refId,\n          intervalMs: options.intervalMs,\n          maxDataPoints: options.maxDataPoints,\n          datasourceId: this.id,\n          url: url,\n          format: options.format,\n          alias: item.alias,\n          xaxis: item.xaxis,\n          yaxis: item.yaxis,\n          spliton: item.spliton,\n          raw: true,\n        };\n      } else {\n        const querystringBuilder = new AppInsightsQuerystringBuilder(\n          options.range.from,\n          options.range.to,\n          options.interval\n        );\n\n        if (item.groupBy !== 'none') {\n          querystringBuilder.setGroupBy(this.templateSrv.replace(item.groupBy, options.scopedVars));\n        }\n        querystringBuilder.setAggregation(item.aggregation);\n        querystringBuilder.setInterval(\n          item.timeGrainType,\n          this.templateSrv.replace(item.timeGrain, options.scopedVars),\n          item.timeGrainUnit\n        );\n\n        querystringBuilder.setFilter(this.templateSrv.replace((item.filter || '')));\n\n        const url = `${this.baseUrl}/metrics/${this.templateSrv.replace(\n          item.metricName,\n          options.scopedVars\n        )}?${querystringBuilder.generate()}`;\n\n        return {\n          refId: target.refId,\n          intervalMs: options.intervalMs,\n          maxDataPoints: options.maxDataPoints,\n          datasourceId: this.id,\n          url: url,\n          format: options.format,\n          alias: item.alias,\n          xaxis: '',\n          yaxis: '',\n          spliton: '',\n          raw: false,\n        };\n      }\n    });\n\n    if (queries.length === 0) {\n      return this.$q.when({ data: [] });\n    }\n\n    const promises = this.doQueries(queries);\n\n    return this.$q.all(promises).then(results => {\n      return new ResponseParser(results).parseQueryResult();\n    });\n  }\n\n  doQueries(queries) {\n    return _.map(queries, query => {\n      return this.doRequest(query.url).then(result => {\n        return {\n          result: result,\n          query: query,\n        };\n      }).catch(err => {\n        throw {\n          error: err,\n          query: query\n        };\n      });\n    });\n  }\n\n  annotationQuery(options) {}\n\n  metricFindQuery(query: string) {\n    const appInsightsMetricNameQuery = query.match(/^AppInsightsMetricNames\\(\\)/i);\n    if (appInsightsMetricNameQuery) {\n      return this.getMetricNames();\n    }\n\n    const appInsightsGroupByQuery = query.match(/^AppInsightsGroupBys\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/i);\n    if (appInsightsGroupByQuery) {\n      const metricName = appInsightsGroupByQuery[1];\n      return this.getGroupBys(this.templateSrv.replace(metricName));\n    }\n\n    return undefined;\n  }\n\n  testDatasource() {\n    const url = `${this.baseUrl}/metrics/metadata`;\n    return this.doRequest(url)\n      .then(response => {\n        if (response.status === 200) {\n          return {\n            status: 'success',\n            message: 'Successfully queried the Application Insights service.',\n            title: 'Success',\n          };\n        }\n\n        return {\n          status: 'error',\n          message: 'Returned http status code ' + response.status,\n        };\n      })\n      .catch(error => {\n        let message = 'Application Insights: ';\n        message += error.statusText ? error.statusText + ': ' : '';\n\n        if (error.data && error.data.error && error.data.error.code === 'PathNotFoundError') {\n          message += 'Invalid Application Id for Application Insights service.';\n        } else if (error.data && error.data.error) {\n          message += error.data.error.code + '. ' + error.data.error.message;\n        } else {\n          message += 'Cannot connect to Application Insights REST API.';\n        }\n\n        return {\n          status: 'error',\n          message: message,\n        };\n      });\n  }\n\n  doRequest(url, maxRetries = 1) {\n    return this.backendSrv\n      .datasourceRequest({\n        url: this.url + url,\n        method: 'GET',\n      })\n      .catch(error => {\n        if (maxRetries > 0) {\n          return this.doRequest(url, maxRetries - 1);\n        }\n\n        throw error;\n      });\n  }\n\n  getMetricNames() {\n    const url = `${this.baseUrl}/metrics/metadata`;\n    return this.doRequest(url).then(ResponseParser.parseMetricNames);\n  }\n\n  getMetricMetadata(metricName: string) {\n    const url = `${this.baseUrl}/metrics/metadata`;\n    return this.doRequest(url).then(result => {\n      return new ResponseParser(result).parseMetadata(metricName);\n    });\n  }\n\n  getGroupBys(metricName: string) {\n    return this.getMetricMetadata(metricName).then(result => {\n      return new ResponseParser(result).parseGroupBys();\n    });\n  }\n}\n","import TimeGrainConverter from '../time_grain_converter';\n\nexport default class AppInsightsQuerystringBuilder {\n  aggregation = '';\n  groupBy = '';\n  timeGrainType = '';\n  timeGrain = '';\n  timeGrainUnit = '';\n  filter = '';\n\n  constructor(private from, private to, public grafanaInterval) {\n  }\n\n  setAggregation(aggregation) {\n    this.aggregation = aggregation;\n  }\n\n  setGroupBy(groupBy) {\n    this.groupBy = groupBy;\n  }\n\n  setInterval(timeGrainType, timeGrain, timeGrainUnit) {\n    this.timeGrainType = timeGrainType;\n    this.timeGrain = timeGrain;\n    this.timeGrainUnit = timeGrainUnit;\n  }\n\n  setFilter(filter: string) {\n    this.filter = filter;\n  }\n\n  generate() {\n    let querystring = `timespan=${this.from.utc().format()}/${this.to.utc().format()}`;\n\n    if (this.aggregation && this.aggregation.length > 0) {\n      querystring += `&aggregation=${this.aggregation}`;\n    }\n\n    if (this.groupBy && this.groupBy.length > 0) {\n      querystring += `&segment=${this.groupBy}`;\n    }\n\n    if (this.timeGrainType === 'specific' && this.timeGrain && this.timeGrainUnit) {\n      querystring += `&interval=${TimeGrainConverter.createISO8601Duration(this.timeGrain, this.timeGrainUnit)}`;\n    }\n\n    if (this.timeGrainType === 'auto') {\n      querystring += `&interval=${TimeGrainConverter.createISO8601DurationFromInterval(this.grafanaInterval)}`;\n    }\n\n    if (this.filter) {\n      querystring += `&filter=${this.filter}`;\n    }\n\n    return querystring;\n  }\n}\n","export default class AppInsightsRawQuerystringBuilder {\n  constructor(public rawQueryString, public options) {}\n\n  generate() {\n    var queryString = this.rawQueryString;\n    queryString = queryString.replace(/\\$__interval/gi, this.options.interval);\n    queryString = queryString.replace(/\\$timeFilter/gi, this.getTimeFilter(this.options));\n    queryString = queryString.replace(/\\$from/gi, this.getFrom(this.options));\n    queryString = queryString.replace(/\\$until/gi, this.getUntil(this.options));\n    queryString = encodeURIComponent(queryString);\n    let uriString = `query=${queryString}`;\n\n    return uriString;\n  }\n\n  getFrom(options) {\n    var from = options.range.from;\n    return `datetime(${from.toISOString()})`;\n  }\n\n  getUntil(options) {\n    if (options.rangeRaw.to === 'now') {\n      return \"now()\";\n    } else {\n      var until = options.range.to;\n      return `datetime(${until.toISOString()})`;\n    }\n  }\n\n  getTimeFilter(options) {\n    if (options.rangeRaw.to === 'now') {\n      return `timestamp >= ${this.getFrom(options)}`;\n    } else {\n      return `timestamp >= ${this.getFrom(options)} and timestamp <= ${this.getUntil(options)}`;\n    }\n  }\n}\n","import moment from 'moment';\nimport _ from 'lodash';\n\nexport default class ResponseParser {\n  columns: Array<string>;\n  constructor(private results) {}\n\n  parseQueryResult() {\n    let data = [];\n    let columns = [];\n    for (let i = 0; i < this.results.length; i++) {\n      if (this.results[i].query.raw) {\n        const xaxis = this.results[i].query.xaxis;\n        const yaxises = this.results[i].query.yaxis;\n        const spliton = this.results[i].query.spliton;\n        columns = this.results[i].result.data.Tables[0].Columns;\n        const rows = this.results[i].result.data.Tables[0].Rows;\n        const alias = this.results[i].query.alias;\n        data = _.concat(data, this.parseRawQueryResultRow(columns, rows, alias, xaxis, yaxises, spliton));\n      } else {\n        const value = this.results[i].result.data.value;\n        const alias = this.results[i].query.alias;\n        data = _.concat(data, this.parseQueryResultRow(value, alias));\n      }\n    }\n\n    const columns_for_dropdowns = _.map(columns, column => { return {text: column.ColumnName, value: column.ColumnName}});\n\n    return {data: data, columns: columns_for_dropdowns};;\n  }\n\n  parseRawQueryResultRow(columns, rows, alias: string, xaxis: string, yaxises: string, spliton: string) {\n    const data: any[] = [];\n    const xaxis_column = columns.findIndex((column) => { return column.ColumnName === xaxis; });\n    const yaxises_split = yaxises.split(',');\n    const yaxis_columns = {};\n    _.forEach(yaxises_split, (yaxis) => {\n      yaxis_columns[yaxis] = columns.findIndex((column) => { return column.ColumnName === yaxis; });\n    });\n    const spliton_column = columns.findIndex((column) => { return column.ColumnName === spliton; });\n    const convert_timestamp = xaxis === \"timestamp\";\n\n    _.forEach(rows, function(row) {\n      _.forEach(yaxis_columns, (yaxis_column, yaxis_name) => {\n        let bucket = spliton_column === -1 ?\n          ResponseParser.findOrCreateBucket(data, yaxis_name) : ResponseParser.findOrCreateBucket(data, row[spliton_column]);\n        let epoch = convert_timestamp ? ResponseParser.dateTimeToEpoch(row[xaxis_column]) : row[xaxis_column];\n        bucket.datapoints.push([row[yaxis_column], epoch]);\n      });\n    });\n\n    return data;\n  }\n\n\n  parseQueryResultRow(value, alias: string) {\n    const data: any[] = [];\n\n    if (ResponseParser.isSingleValue(value)) {\n      const metricName = ResponseParser.getMetricFieldKey(value);\n      const aggField = ResponseParser.getKeyForAggregationField(value[metricName]);\n      const epoch = ResponseParser.dateTimeToEpoch(value.end);\n      data.push({ target: metricName, datapoints: [[value[metricName][aggField], epoch]] });\n      return data;\n    }\n\n    const groupedBy = ResponseParser.hasSegmentsField(value.segments[0]);\n    if (!groupedBy) {\n      const metricName = ResponseParser.getMetricFieldKey(value.segments[0]);\n      const dataTarget = ResponseParser.findOrCreateBucket(data, metricName);\n\n      for (let i = 0; i < value.segments.length; i++) {\n        const epoch = ResponseParser.dateTimeToEpoch(value.segments[i].end);\n        const aggField = ResponseParser.getKeyForAggregationField(value.segments[i][metricName]);\n\n        dataTarget.datapoints.push([value.segments[i][metricName][aggField], epoch]);\n      }\n    } else {\n      for (let i = 0; i < value.segments.length; i++) {\n        const epoch = ResponseParser.dateTimeToEpoch(value.segments[i].end);\n\n        for (let j = 0; j < value.segments[i].segments.length; j++) {\n          const metricName = ResponseParser.getMetricFieldKey(value.segments[i].segments[j]);\n          const aggField = ResponseParser.getKeyForAggregationField(value.segments[i].segments[j][metricName]);\n          const target = this.getTargetName(value.segments[i].segments[j], alias);\n\n          const bucket = ResponseParser.findOrCreateBucket(data, target);\n          bucket.datapoints.push([value.segments[i].segments[j][metricName][aggField], epoch]);\n        }\n      }\n    }\n\n    return data;\n  }\n\n  getTargetName(segment, alias: string) {\n    let metric = '';\n    let segmentName = '';\n    let segmentValue = '';\n    for (let prop in segment) {\n      if (_.isObject(segment[prop])) {\n        metric = prop;\n      } else {\n        segmentName = prop;\n        segmentValue = segment[prop];\n      }\n    }\n\n    if (alias) {\n      const regex = /\\{\\{([\\s\\S]+?)\\}\\}/g;\n      return alias.replace(regex, (match, g1, g2) => {\n        const group = g1 || g2;\n\n        if (group === 'metric') {\n          return metric;\n        } else if (group === 'groupbyname') {\n          return segmentName;\n        } else if (group === 'groupbyvalue') {\n          return segmentValue;\n        }\n\n        return match;\n      });\n    }\n\n    return metric + `{${segmentName}=\"${segmentValue}\"}`;\n  }\n\n  static isSingleValue(value) {\n    return !ResponseParser.hasSegmentsField(value);\n  }\n\n  static findOrCreateBucket(data, target) {\n    let dataTarget = _.find(data, ['target', target]);\n    if (!dataTarget) {\n      dataTarget = { target: target, datapoints: [] };\n      data.push(dataTarget);\n    }\n\n    return dataTarget;\n  }\n\n  static hasSegmentsField(obj) {\n    const keys = _.keys(obj);\n    return _.indexOf(keys, 'segments') > -1;\n  }\n\n  static getMetricFieldKey(segment) {\n    const keys = _.keys(segment);\n\n    return _.filter(_.without(keys, 'start', 'end'), key => {\n      return _.isObject(segment[key]);\n    })[0];\n  }\n\n  static getKeyForAggregationField(dataObj) {\n    const keys = _.keys(dataObj);\n    return _.intersection(keys, ['sum', 'avg', 'min', 'max', 'count', 'unique']);\n  }\n\n  static dateTimeToEpoch(dateTime) {\n    return moment(dateTime).valueOf();\n  }\n\n  static parseMetricNames(result) {\n    const keys = _.keys(result.data.metrics);\n\n    return ResponseParser.toTextValueList(keys);\n  }\n\n  parseMetadata(metricName: string) {\n    const metric = this.results.data.metrics[metricName];\n\n    if (!metric) {\n      throw Error(\"No data found for metric: \" + metricName);\n    }\n\n    return {\n      primaryAggType: metric.defaultAggregation,\n      supportedAggTypes: metric.supportedAggregations,\n      supportedGroupBy: metric.supportedGroupBy.all,\n    };\n  }\n\n  parseGroupBys() {\n    return ResponseParser.toTextValueList(this.results.supportedGroupBy);\n  }\n\n  static toTextValueList(values) {\n    const list: any[] = [];\n    for (let i = 0; i < values.length; i++) {\n      list.push({\n        text: values[i],\n        value: values[i],\n      });\n    }\n    return list;\n  }\n}\n","import _ from 'lodash';\nimport AzureMonitorFilterBuilder from './azure_monitor_filter_builder';\nimport UrlBuilder from './url_builder';\nimport ResponseParser from './response_parser';\nimport SupportedNamespaces from './supported_namespaces';\nimport TimegrainConverter from '../time_grain_converter';\n\nexport default class AzureMonitorDatasource {\n  apiVersion = '2018-01-01';\n  id: number;\n  subscriptionId: string;\n  baseUrl: string;\n  resourceGroup: string;\n  resourceName: string;\n  url: string;\n  defaultDropdownValue = 'select';\n  cloudName: string;\n  supportedMetricNamespaces: any[] = [];\n\n  constructor(private instanceSettings, private backendSrv, private templateSrv, private $q) {\n    this.id = instanceSettings.id;\n    this.subscriptionId = instanceSettings.jsonData.subscriptionId;\n    this.cloudName = instanceSettings.jsonData.cloudName || 'azuremonitor';\n    this.baseUrl = `/${this.cloudName}/subscriptions/${this.subscriptionId}/resourceGroups`;\n    this.url = instanceSettings.url;\n\n    this.supportedMetricNamespaces = new SupportedNamespaces(this.cloudName).get();\n  }\n\n  isConfigured() {\n    return this.subscriptionId && this.subscriptionId.length > 0;\n  }\n\n  query(options) {\n    const queries = _.filter(options.targets, item => {\n      return (\n        item.hide !== true &&\n        item.azureMonitor.resourceGroup &&\n        item.azureMonitor.resourceGroup !== this.defaultDropdownValue &&\n        item.azureMonitor.resourceName &&\n        item.azureMonitor.resourceName !== this.defaultDropdownValue &&\n        item.azureMonitor.metricDefinition &&\n        item.azureMonitor.metricDefinition !== this.defaultDropdownValue &&\n        item.azureMonitor.metricName &&\n        item.azureMonitor.metricName !== this.defaultDropdownValue\n      );\n    }).map(target => {\n      const item = target.azureMonitor;\n\n      if (item.timeGrainUnit && item.timeGrain !== 'auto') {\n        item.timeGrain = TimegrainConverter.createISO8601Duration(\n          item.timeGrain,\n          item.timeGrainUnit\n        );\n      }\n\n      const resourceGroup = this.templateSrv.replace(item.resourceGroup, options.scopedVars);\n      const resourceName = this.templateSrv.replace(item.resourceName, options.scopedVars);\n      const metricDefinition = this.templateSrv.replace(item.metricDefinition, options.scopedVars);\n      const timeGrain = this.templateSrv.replace((item.timeGrain || '').toString(), options.scopedVars);\n\n      const filterBuilder = new AzureMonitorFilterBuilder(\n        item.metricName,\n        options.range.from,\n        options.range.to,\n        timeGrain,\n        options.interval\n      );\n\n      if (item.timeGrains) {\n        filterBuilder.setAllowedTimeGrains(item.timeGrains);\n      }\n\n      if (item.aggregation) {\n        filterBuilder.setAggregation(item.aggregation);\n      }\n\n      if (item.dimension && item.dimension !== 'None') {\n        filterBuilder.setDimensionFilter(item.dimension, item.dimensionFilter);\n      }\n\n      const filter = this.templateSrv.replace(filterBuilder.generateFilter(), options.scopedVars);\n\n      const url = UrlBuilder.buildAzureMonitorQueryUrl(\n        this.baseUrl,\n        resourceGroup,\n        metricDefinition,\n        resourceName,\n        this.apiVersion,\n        filter\n      );\n\n      return {\n        refId: target.refId,\n        intervalMs: options.intervalMs,\n        maxDataPoints: options.maxDataPoints,\n        datasourceId: this.id,\n        url: url,\n        format: options.format,\n        alias: item.alias,\n        raw: false,\n      };\n    });\n\n    if (queries.length === 0) {\n      return this.$q.when({ data: [] });\n    }\n\n    const promises = this.doQueries(queries);\n\n    return this.$q.all(promises).then(results => {\n      return new ResponseParser(results).parseQueryResult();\n    });\n  }\n\n  doQueries(queries) {\n    return _.map(queries, query => {\n      return this.doRequest(query.url).then(result => {\n        return {\n          result: result,\n          query: query,\n        };\n      }).catch(err => {\n        throw {\n          error: err,\n          query: query\n        };\n      });\n    });\n  }\n\n  annotationQuery(options) {}\n\n  metricFindQuery(query: string) {\n    console.log(query);\n    const resourceGroupsQuery = query.match(/^ResourceGroups\\(\\)/i);\n    if (resourceGroupsQuery) {\n      return this.getResourceGroups();\n    }\n\n    const metricDefinitionsQuery = query.match(/^Namespaces\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/i);\n    if (metricDefinitionsQuery) {\n      return this.getMetricDefinitions(this.toVariable(metricDefinitionsQuery[1]));\n    }\n\n    const resourceNamesQuery = query.match(/^ResourceNames\\(([^,]+?),\\s?([^,]+?)\\)/i);\n    if (resourceNamesQuery) {\n      const resourceGroup = this.toVariable(resourceNamesQuery[1]);\n      const metricDefinition = this.toVariable(resourceNamesQuery[2]);\n      return this.getResourceNames(resourceGroup, metricDefinition);\n    }\n\n    const metricNamesQuery = query.match(/^MetricNames\\(([^,]+?),\\s?([^,]+?),\\s?(.+?)\\)/i);\n\n    if (metricNamesQuery) {\n      const resourceGroup = this.toVariable(metricNamesQuery[1]);\n      const metricDefinition = this.toVariable(metricNamesQuery[2]);\n      const resourceName = this.toVariable(metricNamesQuery[3]);\n      return this.getMetricNames(resourceGroup, metricDefinition, resourceName);\n    }\n\n    return Promise.resolve([]);\n  }\n\n  toVariable(metric: string) {\n    return this.templateSrv.replace((metric || '').trim());\n  }\n\n  getResourceGroups() {\n    const url = `${this.baseUrl}?api-version=2018-01-01`;\n    return this.doRequest(url).then(result => {\n      return ResponseParser.parseResponseValues(result, 'name', 'name');\n    });\n  }\n\n  getMetricDefinitions(resourceGroup: string) {\n    const url = `${this.baseUrl}/${resourceGroup}/resources?api-version=2018-01-01`;\n    return this.doRequest(url)\n      .then(result => {\n        return ResponseParser.parseResponseValues(result, 'type', 'type');\n      })\n      .then(result => {\n        return _.filter(result, t => {\n          for (let i = 0; i < this.supportedMetricNamespaces.length; i++) {\n            if (_.startsWith(t.value.toLowerCase(), this.supportedMetricNamespaces[i].toLowerCase())) {\n              return true;\n            }\n          }\n\n          return false;\n        });\n      })\n      .then(result => {\n        let shouldHardcodeBlobStorage = false;\n        for (let i = 0; i < result.length; i++) {\n          if (result[i].value === 'Microsoft.Storage/storageAccounts') {\n            shouldHardcodeBlobStorage = true;\n            break;\n          }\n        }\n\n        if (shouldHardcodeBlobStorage) {\n          result.push({\n            text: 'Microsoft.Storage/storageAccounts/blobServices',\n            value: 'Microsoft.Storage/storageAccounts/blobServices',\n          });\n          result.push({\n            text: 'Microsoft.Storage/storageAccounts/fileServices',\n            value: 'Microsoft.Storage/storageAccounts/fileServices',\n          });\n          result.push({\n            text: 'Microsoft.Storage/storageAccounts/tableServices',\n            value: 'Microsoft.Storage/storageAccounts/tableServices',\n          });\n          result.push({\n            text: 'Microsoft.Storage/storageAccounts/queueServices',\n            value: 'Microsoft.Storage/storageAccounts/queueServices',\n          });\n        }\n\n        return result;\n      });\n  }\n\n  getResourceNames(resourceGroup: string, metricDefinition: string) {\n    const url = `${this.baseUrl}/${resourceGroup}/resources?api-version=2018-01-01`;\n\n    return this.doRequest(url).then(result => {\n      if (!_.startsWith(metricDefinition, 'Microsoft.Storage/storageAccounts/')) {\n        return ResponseParser.parseResourceNames(result, metricDefinition);\n      }\n\n      const list = ResponseParser.parseResourceNames(result, 'Microsoft.Storage/storageAccounts');\n      for (let i = 0; i < list.length; i++) {\n        list[i].text += '/default';\n        list[i].value += '/default';\n      }\n\n      return list;\n    });\n  }\n\n  getMetricNames(resourceGroup: string, metricDefinition: string, resourceName: string) {\n    const url = UrlBuilder.buildAzureMonitorGetMetricNamesUrl(\n      this.baseUrl,\n      resourceGroup,\n      metricDefinition,\n      resourceName,\n      this.apiVersion\n    );\n\n    return this.doRequest(url).then(result => {\n      return ResponseParser.parseResponseValues(result, 'name.localizedValue', 'name.value');\n    });\n  }\n\n  getMetricMetadata(resourceGroup: string, metricDefinition: string, resourceName: string, metricName: string) {\n    const url = UrlBuilder.buildAzureMonitorGetMetricNamesUrl(\n      this.baseUrl,\n      resourceGroup,\n      metricDefinition,\n      resourceName,\n      this.apiVersion\n    );\n\n    return this.doRequest(url).then(result => {\n      return ResponseParser.parseMetadata(result, metricName);\n    });\n  }\n\n  testDatasource() {\n    if (!this.isValidConfigField(this.instanceSettings.jsonData.tenantId)) {\n      return {\n        status: 'error',\n        message: 'The Tenant Id field is required.',\n      };\n    }\n\n    if (!this.isValidConfigField(this.instanceSettings.jsonData.clientId)) {\n      return {\n        status: 'error',\n        message: 'The Client Id field is required.',\n      };\n    }\n\n    const url = `${this.baseUrl}?api-version=2018-01-01`;\n    return this.doRequest(url)\n      .then(response => {\n        if (response.status === 200) {\n          return {\n            status: 'success',\n            message: 'Successfully queried the Azure Monitor service.',\n            title: 'Success',\n          };\n        }\n\n        return {\n          status: 'error',\n          message: 'Returned http status code ' + response.status,\n        };\n      })\n      .catch(error => {\n        let message = 'Azure Monitor: ';\n        message += error.statusText ? error.statusText + ': ' : '';\n\n        if (error.data && error.data.error && error.data.error.code) {\n          message += error.data.error.code + '. ' + error.data.error.message;\n        } else if (error.data && error.data.error) {\n          message += error.data.error;\n        } else if (error.data) {\n          message += error.data;\n        } else {\n          message += 'Cannot connect to Azure Monitor REST API.';\n        }\n        return {\n          status: 'error',\n          message: message,\n        };\n      });\n  }\n\n  isValidConfigField(field: string) {\n    return field && field.length > 0;\n  }\n\n  doRequest(url, maxRetries = 1) {\n    return this.backendSrv\n      .datasourceRequest({\n        url: this.url + url,\n        method: 'GET',\n      })\n      .catch(error => {\n        if (maxRetries > 0) {\n          return this.doRequest(url, maxRetries - 1);\n        }\n\n        throw error;\n      });\n  }\n}\n","import TimegrainConverter from '../time_grain_converter';\n\nexport default class AzureMonitorFilterBuilder {\n  aggregation: string;\n  timeGrainInterval = '';\n  dimension: string;\n  dimensionFilter: string;\n  allowedTimeGrains = ['1m', '5m', '15m', '30m', '1h', '6h', '12h', '1d'];\n\n  constructor(\n    private metricName: string,\n    private from,\n    private to,\n    public timeGrain: string,\n    public grafanaInterval: string) {\n  }\n\n  setAllowedTimeGrains(timeGrains) {\n    this.allowedTimeGrains = [];\n    timeGrains.forEach(tg => {\n      if (tg.value === 'auto') {\n        this.allowedTimeGrains.push(tg.value);\n      } else {\n        this.allowedTimeGrains.push(TimegrainConverter.createKbnUnitFromISO8601Duration(tg.value));\n      }\n    });\n  }\n\n  setAggregation(agg) {\n    this.aggregation = agg;\n  }\n\n  setDimensionFilter(dimension, dimensionFilter) {\n    this.dimension = dimension;\n    this.dimensionFilter = dimensionFilter;\n  }\n\n  generateFilter() {\n    let filter = this.createDatetimeAndTimeGrainConditions();\n\n    if (this.aggregation) {\n      filter += `&aggregation=${this.aggregation}`;\n    }\n\n    if (this.metricName && this.metricName.trim().length > 0) {\n      filter += `&metricnames=${this.metricName}`;\n    }\n\n    if (this.dimension && this.dimensionFilter && this.dimensionFilter.trim().length > 0) {\n      filter += `&$filter=${this.dimension} eq '${this.dimensionFilter}'`;\n    }\n\n    return filter;\n  }\n\n  createDatetimeAndTimeGrainConditions() {\n    const dateTimeCondition = `timespan=${this.from.utc().format()}/${this.to.utc().format()}`;\n\n    if (this.timeGrain === 'auto') {\n      this.timeGrain = this.calculateAutoTimeGrain();\n    }\n    const timeGrainCondition = `&interval=${this.timeGrain}`;\n\n    return dateTimeCondition + timeGrainCondition;\n  }\n\n  calculateAutoTimeGrain() {\n    const roundedInterval = TimegrainConverter.findClosestTimeGrain(this.grafanaInterval, this.allowedTimeGrains);\n\n    return TimegrainConverter.createISO8601DurationFromInterval(roundedInterval);\n  }\n}\n","import moment from 'moment';\nimport _ from 'lodash';\nimport TimeGrainConverter from '../time_grain_converter';\n\nexport default class ResponseParser {\n  constructor(private results) {}\n\n  parseQueryResult() {\n    const data: any[] = [];\n    for (let i = 0; i < this.results.length; i++) {\n      for (let j = 0; j < this.results[i].result.data.value.length; j++) {\n        for (let k = 0; k < this.results[i].result.data.value[j].timeseries.length; k++) {\n          const alias = this.results[i].query.alias;\n          data.push({\n            target: ResponseParser.createTarget(\n              this.results[i].result.data.value[j],\n              this.results[i].result.data.value[j].timeseries[k].metadatavalues,\n              alias\n            ),\n            datapoints: ResponseParser.convertDataToPoints(this.results[i].result.data.value[j].timeseries[k].data)\n          });\n        }\n      }\n    }\n    return data;\n  }\n\n  static createTarget(data, metadatavalues, alias: string) {\n    const resourceGroup = ResponseParser.parseResourceGroupFromId(data.id);\n    const resourceName = ResponseParser.parseResourceNameFromId(data.id);\n    const namespace = ResponseParser.parseNamespaceFromId(data.id, resourceName);\n    if (alias) {\n      const regex = /\\{\\{([\\s\\S]+?)\\}\\}/g;\n      return alias.replace(regex, (match, g1, g2) => {\n        const group = g1 || g2;\n\n        if (group === 'resourcegroup') {\n          return resourceGroup;\n        } else if (group === 'namespace') {\n          return namespace;\n        } else if (group === 'resourcename') {\n          return resourceName;\n        } else if (group === 'metric') {\n          return data.name.value;\n        } else if (group === 'dimensionname') {\n          return metadatavalues && metadatavalues.length > 0 ? metadatavalues[0].name.value : '';\n        }  else if (group === 'dimensionvalue') {\n          return metadatavalues && metadatavalues.length > 0 ? metadatavalues[0].value : '';\n        }\n\n        return match;\n      });\n    }\n\n    if (metadatavalues && metadatavalues.length > 0) {\n      return `${resourceName}{${metadatavalues[0].name.value}=${metadatavalues[0].value}}.${data.name.value}`;\n    }\n\n    return `${resourceName}.${data.name.value}`;\n  }\n\n  static parseResourceGroupFromId(id: string) {\n    const startIndex = id.indexOf('/resourceGroups/') + 16;\n    const endIndex = id.indexOf('/providers');\n\n    return id.substring(startIndex, endIndex);\n  }\n\n  static parseNamespaceFromId(id: string, resourceName: string) {\n    const startIndex = id.indexOf('/providers/') + 11;\n    const endIndex = id.indexOf('/' + resourceName);\n\n    return id.substring(startIndex, endIndex);\n  }\n\n  static parseResourceNameFromId(id: string) {\n    const endIndex = id.lastIndexOf('/providers');\n    const startIndex = id.slice(0, endIndex).lastIndexOf('/') + 1;\n\n    return id.substring(startIndex, endIndex);\n  }\n\n  static convertDataToPoints(timeSeriesData) {\n    const dataPoints: any[] = [];\n\n    for (let k = 0; k < timeSeriesData.length; k++) {\n      const epoch = ResponseParser.dateTimeToEpoch(timeSeriesData[k].timeStamp);\n      const aggKey = ResponseParser.getKeyForAggregationField(timeSeriesData[k]);\n\n      if (aggKey) {\n        dataPoints.push([timeSeriesData[k][aggKey], epoch]);\n      }\n    }\n\n    return dataPoints;\n  }\n\n  static dateTimeToEpoch(dateTime) {\n    return moment(dateTime).valueOf();\n  }\n\n  static getKeyForAggregationField(dataObj) {\n    const keys = _.keys(dataObj);\n    if (keys.length < 2) {\n      return;\n    }\n\n    return _.intersection(keys, ['total', 'average', 'maximum', 'minimum', 'count']);\n  }\n\n  static parseResponseValues(result: any, textFieldName: string, valueFieldName: string) {\n    const list: any[] = [];\n    for (let i = 0; i < result.data.value.length; i++) {\n      if (! _.find(list, ['value', _.get(result.data.value[i], valueFieldName)])) {\n        list.push({\n          text: _.get(result.data.value[i], textFieldName),\n          value: _.get(result.data.value[i], valueFieldName)\n        });\n      }\n    }\n    return list;\n  }\n\n  static parseResourceNames(result: any, metricDefinition: string) {\n    const list: any[] = [];\n    for (let i = 0; i < result.data.value.length; i++) {\n      if (result.data.value[i].type === metricDefinition) {\n        list.push({\n          text: result.data.value[i].name,\n          value: result.data.value[i].name\n        });\n      }\n    }\n\n    return list;\n  }\n\n  static parseMetadata(result: any, metricName: string) {\n    const metricData = _.find(result.data.value, o => {\n      return _.get(o, 'name.value') === metricName;\n    });\n\n    const defaultAggTypes = ['None', 'Average', 'Minimum', 'Maximum', 'Total', 'Count'];\n\n    return {\n      primaryAggType: metricData.primaryAggregationType,\n      supportedAggTypes: metricData.supportedAggregationTypes || defaultAggTypes,\n      supportedTimeGrains: ResponseParser.parseTimeGrains(metricData.metricAvailabilities || []),\n      dimensions: ResponseParser.parseDimensions(metricData)\n    };\n  }\n\n  static parseTimeGrains(metricAvailabilities) {\n    const timeGrains: any[] = [];\n    metricAvailabilities.forEach(avail => {\n      if (avail.timeGrain) {\n        timeGrains.push({\n          text: TimeGrainConverter.createTimeGrainFromISO8601Duration(avail.timeGrain),\n          value: avail.timeGrain}\n        );\n      }\n    });\n    return timeGrains;\n  }\n\n  static parseDimensions(metricData: any) {\n    const dimensions: any[] = [];\n    if (!metricData.dimensions || metricData.dimensions.length === 0) {\n      return dimensions;\n    }\n\n    if (!metricData.isDimensionRequired) {\n      dimensions.push({text: 'None', value: 'None'});\n    }\n\n    for (let i = 0; i < metricData.dimensions.length; i++) {\n      dimensions.push({\n        text: metricData.dimensions[i].localizedValue,\n        value: metricData.dimensions[i].value\n      });\n    }\n    return dimensions;\n  }\n}\n","export default class SupportedNamespaces {\n  supportedMetricNamespaces = {\n    'azuremonitor': [\n      'Microsoft.Compute',\n      'Microsoft.ClassicCompute',\n      'Microsoft.Storage',\n      'Microsoft.Sql',\n      'Microsoft.Web',\n      'Microsoft.EventHub',\n      'Microsoft.ServiceBus',\n      'Microsoft.Devices',\n      'Microsoft.DocumentDb',\n      'Microsoft.Network',\n      'Microsoft.Cache/Redis',\n      'Microsoft.AnalysisServices/servers',\n      'Microsoft.ApiManagement/service',\n      'Microsoft.Automation/automationAccounts',\n      'Microsoft.Batch/batchAccounts',\n      'Microsoft.CognitiveServices/accounts',\n      'Microsoft.CustomerInsights/hubs',\n      'Microsoft.DataLakeAnalytics/accounts',\n      'Microsoft.DataLakeStore/accounts',\n      'Microsoft.DBforMySQL/servers',\n      'Microsoft.DBforPostgreSQL/servers',\n      'Microsoft.Logic/workflows',\n      'Microsoft.NotificationHubs/Namespaces/NotificationHubs',\n      'Microsoft.Search/searchServices',\n      'Microsoft.StreamAnalytics/streamingjobs',\n      'Microsoft.DataFactory/datafactories',\n      'Microsoft.DataFactory/factories',\n      'Microsoft.KeyVaults/vaults',\n      'Microsoft.LocationBasedServices/accounts',\n      'Microsoft.PowerBIDedicated/capacities',\n      'Microsoft.Relay/namespaces'\n    ],\n    'govazuremonitor': [\n      'Microsoft.AnalysisServices/Servers',\n      'Microsoft.ApiManagement/service',\n      'Microsoft.Compute/virtualMachines',\n      'Microsoft.Compute/virtualMachineScaleSets',\n      'Microsoft.Compute/virtualMachineScaleSets/virtualMachines',\n      'Microsoft.Devices/IotHubs',\n      'Microsoft.Devices/provisioningServices',\n      'Microsoft.Devices/ElasticPools',\n      'Microsoft.Devices/ElasticPools/IotHubtTenants',\n      'Microsoft.EventHubs/namespaces',\n      'Microsoft.Insights/AutoscaleSettings',\n      'Microsoft.KeyVault/vaults',\n      'Microsoft.Network/loadBalancers',\n      'Microsoft.Network/publicIPAdresses',\n      'Microsoft.Network/applicationGateways',\n      'Microsoft.Network/virtualNetworkGateways',\n      'Microsoft.Network/expressRouteCircuits',\n      'Microsoft.Network/trafficManagerProfiles',\n      'Microsoft.NotificationHubs/Namespaces/NotificationHubs',\n      'Microsoft.PowerBiDedicated/capacities',\n      'Microsoft.ServiceBus/namespaces',\n      'Microsoft.Sql/servers/databases',\n      'Microsoft.Sql/servers/elasticPools',\n      'Microsoft.Sql/servers',\n      'Microsoft.Web/serverfarms',\n      'Microsoft.Web/sites',\n      'Microsoft.Web/sites/slots',\n      'Microsoft.Web/hostingEnvironments/multiRolePools',\n      'Microsoft.Web/hostingEnvironments/workerPools'\n    ],\n    'germanyazuremonitor': [\n      'Microsoft.AnalysisServices/Servers',\n      'Microsoft.Compute/virtualMachines',\n      'Microsoft.Compute/virtualMachineScaleSets',\n      'Microsoft.Compute/virtualMachineScaleSets/virtualMachines',\n      'Microsoft.Devices/IotHubs',\n      'Microsoft.Devices/provisioningServices',\n      'Microsoft.Devices/ElasticPools',\n      'Microsoft.Devices/ElasticPools/IotHubtTenants',\n      'Microsoft.EventHubs/namespaces',\n      'Microsoft.Insights/AutoscaleSettings',\n      'Microsoft.KeyVault/vaults',\n      'Microsoft.Network/loadBalancers',\n      'Microsoft.Network/publicIPAdresses',\n      'Microsoft.Network/applicationGateways',\n      'Microsoft.Network/virtualNetworkGateways',\n      'Microsoft.Network/expressRouteCircuits',\n      'Microsoft.Network/trafficManagerProfiles',\n      'Microsoft.NotificationHubs/Namespaces/NotificationHubs',\n      'Microsoft.ServiceBus/namespaces',\n      'Microsoft.Sql/servers/databases',\n      'Microsoft.Sql/servers/elasticPools',\n      'Microsoft.Sql/servers',\n      'Microsoft.Web/serverfarms',\n      'Microsoft.Web/sites',\n      'Microsoft.Web/sites/slots',\n      'Microsoft.Web/hostingEnvironments/multiRolePools',\n      'Microsoft.Web/hostingEnvironments/workerPools'\n    ],\n    'chinaazuremonitor': [\n      'Microsoft.AnalysisServices/Servers',\n      'Microsoft.ApiManagement/service',\n      'Microsoft.Compute/virtualMachines',\n      'Microsoft.Compute/virtualMachineScaleSets',\n      'Microsoft.Compute/virtualMachineScaleSets/virtualMachines',\n      'Microsoft.Devices/IotHubs',\n      'Microsoft.Devices/provisioningServices',\n      'Microsoft.Devices/ElasticPools',\n      'Microsoft.Devices/ElasticPools/IotHubtTenants',\n      'Microsoft.EventHubs/namespaces',\n      'Microsoft.Insights/AutoscaleSettings',\n      'Microsoft.KeyVault/vaults',\n      'Microsoft.Network/loadBalancers',\n      'Microsoft.Network/publicIPAdresses',\n      'Microsoft.Network/applicationGateways',\n      'Microsoft.Network/virtualNetworkGateways',\n      'Microsoft.Network/expressRouteCircuits',\n      'Microsoft.Network/trafficManagerProfiles',\n      'Microsoft.NotificationHubs/Namespaces/NotificationHubs',\n      'Microsoft.ServiceBus/namespaces',\n      'Microsoft.Sql/servers/databases',\n      'Microsoft.Sql/servers/elasticPools',\n      'Microsoft.Sql/servers',\n      'Microsoft.Web/serverfarms',\n      'Microsoft.Web/sites',\n      'Microsoft.Web/sites/slots',\n      'Microsoft.Web/hostingEnvironments/multiRolePools',\n      'Microsoft.Web/hostingEnvironments/workerPools'\n    ]\n  };\n\n  constructor(private cloudName: string) {}\n\n  get() {\n    return this.supportedMetricNamespaces[this.cloudName];\n  }\n}\n","import _ from 'lodash';\n\nexport default class UrlBuilder {\n  static buildAzureMonitorQueryUrl(baseUrl: string, resourceGroup: string, metricDefinition: string,\n    resourceName: string, apiVersion: string, filter: string) {\n\n    if (_.startsWith(metricDefinition, 'Microsoft.Storage/storageAccounts/') || metricDefinition === 'Microsoft.Sql/servers/databases') {\n      const rn = resourceName.split('/');\n      const service = metricDefinition.substring(metricDefinition.lastIndexOf('/') + 1);\n      const md = metricDefinition.substring(0, metricDefinition.lastIndexOf('/'));\n      return `${baseUrl}/${resourceGroup}/providers/${md}/${rn[0]}/${service}/${rn[1]}` +\n        `/providers/microsoft.insights/metrics?api-version=${apiVersion}&${filter}`;\n    }\n\n    return `${baseUrl}/${resourceGroup}/providers/${metricDefinition}/${resourceName}` +\n    `/providers/microsoft.insights/metrics?api-version=${apiVersion}&${filter}`;\n  }\n\n  static buildAzureMonitorGetMetricNamesUrl(baseUrl: string, resourceGroup: string, metricDefinition: string,\n    resourceName: string, apiVersion: string ) {\n    if (_.startsWith(metricDefinition, 'Microsoft.Storage/storageAccounts/') || metricDefinition === 'Microsoft.Sql/servers/databases') {\n      const rn = resourceName.split('/');\n      const service = metricDefinition.substring(metricDefinition.lastIndexOf('/') + 1);\n      const md = metricDefinition.substring(0, metricDefinition.lastIndexOf('/'));\n      return `${baseUrl}/${resourceGroup}/providers/${md}/${rn[0]}/${service}/${rn[1]}` +\n        `/providers/microsoft.insights/metricdefinitions?api-version=${apiVersion}`;\n    }\n\n    return `${baseUrl}/${resourceGroup}/providers/${metricDefinition}/${resourceName}` +\n      `/providers/microsoft.insights/metricdefinitions?api-version=${apiVersion}`;\n  }\n}\n","export class AzureMonitorConfigCtrl {\n  static templateUrl = 'partials/config.html';\n  current: any;\n\n  constructor($scope) {\n    this.current.jsonData.cloudName = this.current.jsonData.cloudName || 'azuremonitor';\n  }\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!./query_editor.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!./query_editor.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!./query_editor.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import _ from 'lodash';\nimport AzureMonitorDatasource from './azure_monitor/azure_monitor_datasource';\nimport AppInsightsDatasource from './app_insights/app_insights_datasource';\n\nexport default class Datasource {\n  id: number;\n  name: string;\n  azureMonitorDatasource: AzureMonitorDatasource;\n  appInsightsDatasource: AppInsightsDatasource;\n  columns: { text: string, value: string }[];\n\n  /** @ngInject */\n  constructor(instanceSettings, private backendSrv, private templateSrv, private $q) {\n    this.name = instanceSettings.name;\n    this.id = instanceSettings.id;\n    this.azureMonitorDatasource = new AzureMonitorDatasource(\n      instanceSettings,\n      this.backendSrv,\n      this.templateSrv,\n      this.$q\n    );\n    this.appInsightsDatasource = new AppInsightsDatasource(\n      instanceSettings,\n      this.backendSrv,\n      this.templateSrv,\n      this.$q\n    );\n  }\n\n  query(options) {\n    const promises: any[] = [];\n    const azureMonitorOptions = _.cloneDeep(options);\n    const appInsightsTargets = _.cloneDeep(options);\n    var that = this;\n\n    azureMonitorOptions.targets = _.filter(azureMonitorOptions.targets, ['queryType', 'Azure Monitor']);\n    appInsightsTargets.targets = _.filter(appInsightsTargets.targets, ['queryType', 'Application Insights']);\n\n    if (azureMonitorOptions.targets.length > 0) {\n      promises.push(this.azureMonitorDatasource.query(azureMonitorOptions));\n    }\n\n    if (appInsightsTargets.targets.length > 0) {\n      promises.push(this.appInsightsDatasource.query(appInsightsTargets));\n    }\n\n    return Promise.all(promises).then(results => {\n      if(results[0].data) {\n        that.columns = results[0].columns\n        return { data: _.flatten(results[0].data) };\n      } else {\n        return { data: _.flatten(results) };\n      }\n    });\n  }\n\n  annotationQuery(options) {\n    throw new Error('Annotation Support not implemented yet.');\n  }\n\n  metricFindQuery(query: string) {\n    if (!query) {\n      return Promise.resolve([]);\n    }\n\n    const aiResult = this.appInsightsDatasource.metricFindQuery(query);\n    if (aiResult) {\n      return aiResult;\n    }\n\n    const amResult = this.azureMonitorDatasource.metricFindQuery(query);\n    if (amResult) {\n      return amResult;\n    }\n\n    return Promise.resolve([]);\n  }\n\n  testDatasource() {\n    const promises: any[] = [];\n\n    if (this.azureMonitorDatasource.isConfigured()) {\n      promises.push(this.azureMonitorDatasource.testDatasource());\n    }\n\n    if (this.appInsightsDatasource.isConfigured()) {\n      promises.push(this.appInsightsDatasource.testDatasource());\n    }\n\n    if (promises.length === 0) {\n      return {\n        status: 'error',\n        message: `Nothing configured. At least one of the API's must be configured.`,\n        title: 'Error',\n      };\n    }\n\n    return this.$q.all(promises).then(results => {\n      let status = 'success';\n      let message = '';\n\n      for (let i = 0; i < results.length; i++) {\n        if (results[i].status !== 'success') {\n          status = results[i].status;\n        }\n        message += `${i + 1}. ${results[i].message} `;\n      }\n\n      return {\n        status: status,\n        message: message,\n        title: _.upperFirst(status),\n      };\n    });\n  }\n\n  /* Azure Monitor REST API methods */\n  getResourceGroups() {\n    return this.azureMonitorDatasource.getResourceGroups();\n  }\n\n  getMetricDefinitions(resourceGroup: string) {\n    return this.azureMonitorDatasource.getMetricDefinitions(resourceGroup);\n  }\n\n  getResourceNames(resourceGroup: string, metricDefinition: string) {\n    return this.azureMonitorDatasource.getResourceNames(resourceGroup, metricDefinition);\n  }\n\n  getMetricNames(resourceGroup: string, metricDefinition: string, resourceName: string) {\n    return this.azureMonitorDatasource.getMetricNames(resourceGroup, metricDefinition, resourceName);\n  }\n\n  getMetricMetadata(resourceGroup: string, metricDefinition: string, resourceName: string, metricName: string) {\n    return this.azureMonitorDatasource.getMetricMetadata(resourceGroup, metricDefinition, resourceName, metricName);\n  }\n\n  /* Application Insights API method */\n  getAppInsightsMetricNames() {\n    return this.appInsightsDatasource.getMetricNames();\n  }\n\n  getAppInsightsMetricMetadata(metricName) {\n    return this.appInsightsDatasource.getMetricMetadata(metricName);\n  }\n\n  getAppInsightsColumns() {\n    return this.columns;\n  }\n}\n","import Datasource from './datasource';\nimport { AzureMonitorQueryCtrl } from './query_ctrl';\nimport { AzureMonitorConfigCtrl } from './config_ctrl';\n\nclass AzureMonitorQueryOptionsCtrl {\n  static templateUrl = 'partials/query.options.html';\n}\n\nclass AzureMonitorAnnotationsQueryCtrl {\n  static templateUrl = 'partials/annotations.editor.html';\n}\n\nexport {\n  Datasource,\n  AzureMonitorQueryCtrl as QueryCtrl,\n  AzureMonitorConfigCtrl as ConfigCtrl,\n  AzureMonitorQueryOptionsCtrl as QueryOptionsCtrl,\n  AzureMonitorAnnotationsQueryCtrl as AnnotationsQueryCtrl,\n};\n","import _ from 'lodash';\nimport {QueryCtrl} from 'app/plugins/sdk';\nimport './css/query_editor.css';\nimport TimegrainConverter from './time_grain_converter';\n// import * as monaco from 'monaco-editor';\n\nexport class AzureMonitorQueryCtrl extends QueryCtrl {\n  static templateUrl = 'partials/query.editor.html';\n  lastQueryError?: string;\n\n  defaultDropdownValue = 'select';\n\n  defaults = {\n    queryType: 'Azure Monitor',\n    azureMonitor: {\n      resourceGroup: this.defaultDropdownValue,\n      metricDefinition: this.defaultDropdownValue,\n      resourceName: this.defaultDropdownValue,\n      metricName: this.defaultDropdownValue,\n      dimensionFilter: '*',\n      timeGrain: 'auto'\n    },\n    appInsights: {\n      metricName: this.defaultDropdownValue,\n      rawQuery: false,\n      rawQueryString: '',\n      groupBy: 'none',\n      timeGrainType: 'auto',\n      xaxis: 'timestamp',\n      yaxis: '',\n      spliton: ''\n    }\n  };\n\n  /** @ngInject **/\n  constructor($scope, $injector, private templateSrv) {\n    super($scope, $injector);\n\n    _.defaultsDeep(this.target, this.defaults);\n    this.migrateTimeGrains();\n\n    this.panelCtrl.events.on('data-received', this.onDataReceived.bind(this), $scope);\n    this.panelCtrl.events.on('data-error', this.onDataError.bind(this), $scope);\n\n    // monaco.editor.create(document.getElementById('container'), {\n    //   value: [\n    //     'function x() {',\n    //     '\\tconsole.log(\"Hello world!\");',\n    //     '}'\n    //   ].join('\\n'),\n    //   language: 'javascript'\n    // });\n  }\n\n  onDataReceived(dataList) {\n    this.lastQueryError = undefined;\n  }\n\n  onDataError(err) {\n    this.handleQueryCtrlError(err);\n  }\n\n  handleQueryCtrlError(err) {\n    if (err.query && err.query.refId && err.query.refId !== this.target.refId) {\n      return;\n    }\n\n    if (err.error && err.error.data && err.error.data.error) {\n      this.lastQueryError = err.error.data.error.message;\n    } else if (err.error && err.error.data) {\n      this.lastQueryError = err.error.data.message;\n    } else if (err.data && err.data.error) {\n      this.lastQueryError = err.data.error.message;\n    } else if (err.data && err.data.message) {\n      this.lastQueryError = err.data.message;\n    } else {\n      this.lastQueryError = err;\n    }\n  }\n\n  migrateTimeGrains() {\n    if (this.target.azureMonitor.timeGrainUnit) {\n\n      if (this.target.azureMonitor.timeGrain !== 'auto') {\n        this.target.azureMonitor.timeGrain =\n          TimegrainConverter.createISO8601Duration(this.target.azureMonitor.timeGrain, this.target.azureMonitor.timeGrainUnit);\n      }\n\n      delete this.target.azureMonitor.timeGrainUnit;\n      this.onMetricNameChange();\n    }\n  }\n\n  replace(variable: string) {\n    return this.templateSrv.replace(variable, this.panelCtrl.panel.scopedVars);\n  }\n\n  /* Azure Monitor Section */\n  getResourceGroups(query) {\n    if (this.target.queryType !== 'Azure Monitor' || !this.datasource.azureMonitorDatasource.isConfigured()) {\n      return;\n    }\n\n    return this.datasource.getResourceGroups().catch(this.handleQueryCtrlError.bind(this));\n  }\n\n  getMetricDefinitions(query) {\n    if (this.target.queryType !== 'Azure Monitor' || !this.target.azureMonitor.resourceGroup\n      || this.target.azureMonitor.resourceGroup === this.defaultDropdownValue) {\n      return;\n    }\n    return this.datasource.getMetricDefinitions(this.replace(this.target.azureMonitor.resourceGroup))\n      .catch(this.handleQueryCtrlError.bind(this));\n  }\n\n  getResourceNames(query) {\n    if (this.target.queryType !== 'Azure Monitor' || !this.target.azureMonitor.resourceGroup\n      || this.target.azureMonitor.resourceGroup === this.defaultDropdownValue || !this.target.azureMonitor.metricDefinition\n      || this.target.azureMonitor.metricDefinition === this.defaultDropdownValue) {\n      return;\n    }\n\n    return this.datasource.getResourceNames(\n      this.replace(this.target.azureMonitor.resourceGroup),\n      this.replace(this.target.azureMonitor.metricDefinition)\n    ).catch(this.handleQueryCtrlError.bind(this));\n  }\n\n  getMetricNames(query) {\n    if (this.target.queryType !== 'Azure Monitor' || !this.target.azureMonitor.resourceGroup\n      || this.target.azureMonitor.resourceGroup === this.defaultDropdownValue || !this.target.azureMonitor.metricDefinition\n      || this.target.azureMonitor.metricDefinition === this.defaultDropdownValue || !this.target.azureMonitor.resourceName\n      || this.target.azureMonitor.resourceName === this.defaultDropdownValue) {\n      return;\n    }\n\n    return this.datasource.getMetricNames(\n      this.replace(this.target.azureMonitor.resourceGroup),\n      this.replace(this.target.azureMonitor.metricDefinition),\n      this.replace(this.target.azureMonitor.resourceName)\n    ).catch(this.handleQueryCtrlError.bind(this));\n  }\n\n  onResourceGroupChange() {\n    this.target.azureMonitor.metricDefinition = this.defaultDropdownValue;\n    this.target.azureMonitor.resourceName = this.defaultDropdownValue;\n    this.target.azureMonitor.metricName = this.defaultDropdownValue;\n    this.target.azureMonitor.dimensions = [];\n    this.target.azureMonitor.dimension = '';\n  }\n\n  onMetricDefinitionChange() {\n    this.target.azureMonitor.resourceName = this.defaultDropdownValue;\n    this.target.azureMonitor.metricName = this.defaultDropdownValue;\n    this.target.azureMonitor.dimensions = [];\n    this.target.azureMonitor.dimension = '';\n  }\n\n  onResourceNameChange() {\n    this.target.azureMonitor.metricName = this.defaultDropdownValue;\n    this.target.azureMonitor.dimensions = [];\n    this.target.azureMonitor.dimension = '';\n  }\n\n  onMetricNameChange() {\n    if (!this.target.azureMonitor.metricName || this.target.azureMonitor.metricName === this.defaultDropdownValue) {\n      return;\n    }\n\n    return this.datasource.getMetricMetadata(\n      this.replace(this.target.azureMonitor.resourceGroup),\n      this.replace(this.target.azureMonitor.metricDefinition),\n      this.replace(this.target.azureMonitor.resourceName),\n      this.replace(this.target.azureMonitor.metricName)\n    ).then(metadata => {\n      this.target.azureMonitor.aggOptions = metadata.supportedAggTypes || [metadata.primaryAggType];\n      this.target.azureMonitor.aggregation = metadata.primaryAggType;\n      this.target.azureMonitor.timeGrains = [{text: 'auto', value: 'auto'}].concat(metadata.supportedTimeGrains);\n\n      this.target.azureMonitor.dimensions = metadata.dimensions;\n      if (metadata.dimensions.length > 0) {\n        this.target.azureMonitor.dimension = metadata.dimensions[0].value;\n      }\n      return this.refresh();\n    }).catch(this.handleQueryCtrlError.bind(this));\n  }\n\n  getAutoInterval() {\n    if (this.target.azureMonitor.timeGrain === 'auto') {\n      return TimegrainConverter.findClosestTimeGrain(\n        this.panelCtrl.interval,\n        _.map(this.target.azureMonitor.timeGrains, o => TimegrainConverter.createKbnUnitFromISO8601Duration(o.value))\n        || ['1m', '5m', '15m', '30m', '1h', '6h', '12h', '1d']\n      );\n    }\n\n    return '';\n  }\n\n  /* Application Insights Section */\n\n  getAppInsightsAutoInterval() {\n    if (this.panelCtrl.interval[this.panelCtrl.interval.length - 1] === 's') {\n      return '1m';\n    }\n    return this.panelCtrl.interval;\n  }\n  getAppInsightsMetricNames() {\n    if (!this.datasource.appInsightsDatasource.isConfigured()) {\n      return;\n    }\n\n    return this.datasource.getAppInsightsMetricNames().catch(this.handleQueryCtrlError.bind(this));\n  }\n\n  getAppInsightsColumns() {\n    return this.datasource.getAppInsightsColumns();\n  }\n\n  onAppInsightsColumnChange() {\n    return this.refresh();\n  }\n\n\n  onAppInsightsMetricNameChange() {\n    if (!this.target.appInsights.metricName || this.target.appInsights.metricName === this.defaultDropdownValue) {\n      return;\n    }\n\n    return this.datasource.getAppInsightsMetricMetadata(this.replace(this.target.appInsights.metricName))\n      .then(aggData => {\n        this.target.appInsights.aggOptions = aggData.supportedAggTypes;\n        this.target.appInsights.groupByOptions = aggData.supportedGroupBy;\n        this.target.appInsights.aggregation = aggData.primaryAggType;\n        return this.refresh();\n      }).catch(this.handleQueryCtrlError.bind(this));\n  }\n\n  getAppInsightsGroupBySegments(query) {\n    return _.map(this.target.appInsights.groupByOptions, option => {\n      return {text: option, value: option};\n    });\n  }\n\n  resetAppInsightsGroupBy() {\n    this.target.appInsights.groupBy = 'none';\n    this.refresh();\n  }\n\n  updateTimeGrainType() {\n    if (this.target.appInsights.timeGrainType === 'specific') {\n      this.target.appInsights.timeGrain = '1';\n      this.target.appInsights.timeGrainUnit = 'minute';\n    } else {\n      this.target.appInsights.timeGrain = '';\n    }\n    this.refresh();\n  }\n\n  toggleEditorMode() {\n    this.target.appInsights.rawQuery = !this.target.appInsights.rawQuery;\n  }\n}\n","import _ from 'lodash';\nimport kbn from 'app/core/utils/kbn';\n\nexport default class TimeGrainConverter {\n  static createISO8601Duration(timeGrain, timeGrainUnit) {\n    const timeIntervals = ['hour', 'minute', 'h', 'm'];\n    if (_.includes(timeIntervals, timeGrainUnit)) {\n      return `PT${timeGrain}${timeGrainUnit[0].toUpperCase()}`;\n    }\n\n    return `P${timeGrain}${timeGrainUnit[0].toUpperCase()}`;\n  }\n\n  static createISO8601DurationFromInterval(interval: string) {\n    const timeGrain = +interval.slice(0, interval.length - 1);\n    const unit = interval[interval.length - 1];\n\n    if (interval.indexOf('ms') > -1) {\n      return TimeGrainConverter.createISO8601Duration(1, 'm');\n    }\n\n    if (interval[interval.length - 1] === 's') {\n      let toMinutes = (timeGrain * 60) % 60;\n\n      if (toMinutes < 1) {\n        toMinutes = 1;\n      }\n\n      return TimeGrainConverter.createISO8601Duration(toMinutes, 'm');\n    }\n\n    return TimeGrainConverter.createISO8601Duration(timeGrain, unit);\n  }\n\n  static findClosestTimeGrain(interval, allowedTimeGrains) {\n    const timeGrains = _.filter(allowedTimeGrains, o => { return o !== 'auto'; });\n\n    let closest = timeGrains[0];\n    const intervalMs = kbn.interval_to_ms(interval);\n\n    for (let i = 0; i < timeGrains.length; i++) {\n      // abs (num - val) < abs (num - curr):\n      if (intervalMs > kbn.interval_to_ms(timeGrains[i])) {\n        if ((i + 1) < timeGrains.length) {\n          closest = timeGrains[i + 1];\n        } else {\n          closest = timeGrains[i];\n        }\n      }\n    }\n\n    return closest;\n  }\n\n  static createTimeGrainFromISO8601Duration(duration: string) {\n    let offset = 1;\n    if (duration.substring(0,2) === 'PT') {\n      offset = 2;\n    }\n\n    const value = duration.substring(offset, duration.length-1);\n    const unit = duration.substring(duration.length-1);\n\n    return value + ' ' + TimeGrainConverter.timeUnitToText(+value, unit);\n  }\n\n  static timeUnitToText(value: number, unit: string) {\n    let text = '';\n\n    if (unit === 'S') { text = 'second'; }\n    if (unit === 'M') { text = 'minute'; }\n    if (unit === 'H') { text = 'hour'; }\n    if (unit === 'D') { text = 'day'; }\n\n    if ( value > 1) {\n      return text + 's';\n    }\n\n    return text;\n  }\n\n  static createKbnUnitFromISO8601Duration(duration: string) {\n    if (duration === 'auto') {\n      return 'auto';\n    }\n\n    let offset = 1;\n    if (duration.substring(0,2) === 'PT') {\n      offset = 2;\n    }\n\n    const value = duration.substring(offset, duration.length-1);\n    const unit = duration.substring(duration.length-1);\n\n    return value + TimeGrainConverter.timeUnitToKbn(+value, unit);\n  }\n\n  static timeUnitToKbn(value: number, unit: string) {\n      if (unit === 'S') { return 's'; }\n      if (unit === 'M') { return 'm'; }\n      if (unit === 'H') { return 'h'; }\n      if (unit === 'D') { return 'd'; }\n\n      return '';\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE_app_core_utils_kbn__;","module.exports = __WEBPACK_EXTERNAL_MODULE_app_plugins_sdk__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;","module.exports = __WEBPACK_EXTERNAL_MODULE_moment__;"],"sourceRoot":""}